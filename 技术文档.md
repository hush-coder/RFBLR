# 项目概述

## 目标

构建支持 RISC-V 和 LoongArch 的跨平台编译器

核心特性

+ 基于 Rust 的内存安全前端（Flex/Bison 生成器）
+ LLVM 毕昇分支优化 
+ 支持 RISC-V V 扩展与 LoongArch 基础指令集

## 架构

### 流程图

graph LR
  A[源码输入] --> B(Flex词法分析器)
  B --> C(Bison语法解析器)
  C --> D[Rust AST绑定层]
  D --> E[语义分析与类型检查]
  E --> F[inkwell生成LLVM IR]
  F --> G{毕昇LLVM优化Pass}
  G --> H[RISCV代码生成器]
  G --> I[LoongArch扩展模块]

### 前端实现细节

#### Flex/Bison与Rust FFI桥接

Flex/Bison生成C文件之后，使用bindgen创建Rust接口

```rust
bindgen::Builder::default()
  .header("src/ffi/parser.hpp")
  .generate_comments(false)
  .derive_default(true)
  .allowlist_type("ASTNode.*")
  .allowlist_function("yyparse")
  .parse_callbacks(Box::new(bindgen::CargoCallbacks))
  .generate()
  .unwrap()
  .write_to_file("src/ffi/parser_ffi.rs");
```

